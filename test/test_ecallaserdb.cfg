//
// Tests EcalLaserCorrectionService producer
//
// Toyoko Orimoto (Caltech), 10 July 2007


process TEST = {

//    	include "FWCore/MessageService/data/MessageLogger.cfi"
    	include "CondCore/DBCommon/data/CondDBCommon.cfi"

	module print = AsciiOutputModule { }
	
	module EcalLaserDbAnalyzer = EcalLaserDbAnalyzer {}
	
	es_module = EcalLaserCorrectionService {}

        replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_ECAL_OFF_TEST"
        replace CondDBCommon.catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_ECAL_OFF_TEST"
        replace CondDBCommon.DBParameters.authenticationPath="/afs/cern.ch/user/t/torimoto/scratch0/CMSSW/CMSSW_1_5_0/src/CondTools/Ecal/db_auth"    

	es_source es_pool = PoolDBESSource { 
	        using CondDBCommon
	        VPSet toGet = {
			 { 
				string record = "EcalLaserAPDPNRatiosRcd" 
				string tag = "EcalLaserAPDPNRatios_o2o" 
	 		}

#   	            	{
#       	                string record = "EcalLaserAPDPNRatiosRefRcd"
#               	        string tag = "EcalLaserAPDPNRatiosRef_master"
#               	}
#                	{
#                      	  	string record = "EcalLaserAlphasRcd"
#                        	string tag = "EcalLaserAlphas_master"
#                	}
 	
		}
        	untracked bool siteLocalConfig=false

	}				   

#	es_source es_hardcode = HcalHardcodeCalibrations {untracked vstring toGet = {"QIEData", "channelQuality", "electronicsMap"}}


    // Empty event source
    source = EmptyIOVSource {
	 string timetype = "runnumber"
#         untracked uint32 firstRun = 11
#	 untracked uint32 lastRun = 20
         untracked uint32 firstRun = 11
	 untracked uint32 lastRun = 20
         uint32 interval = 1
	}

#    	source = EmptySource {
#		string timetype = "runnumber"
#         	untracked uint32 firstRun = 11
#	 	untracked uint32 lastRun = 20
#         	uint32 interval = 1
#	}
#
        untracked PSet maxEvents = {untracked int32 input = 100}	

#	source = EmptySource {      #untracked int32 maxEvents = 20
#                                    untracked uint32 firstRun = 1 
#                                    untracked uint32 numberEventsInRun = 2 
#                                   }

        module get = EventSetupRecordDataGetter { VPSet toGet = {
               {
		string record = "EcalLaserAPDPNRatiosRcd"
                vstring data = {"EcalLaserAPDPNRatios"} 
#		string record = "EcalLaserAPDPNRatiosRefRcd"
#                vstring data = {"EcalLaserAPDPNRatiosRef"} 
		}
               }
               untracked bool verbose = true
        }


	path p = { get & print & EcalLaserDbAnalyzer}



}
